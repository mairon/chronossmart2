<%= form_tag gera_cotas_presupuestos_path, :method => "get" do %>
<%= hidden_field_tag :presupuesto_id, @presupuesto.id %>
<div class="row">
	<div class="col-md-2">
		<label>1ยบ Venc.</label>
		<%= text_field_tag :vencimento, @presupuesto.data.strftime("%d/%m/%Y"), class: 'panel-field' %>
	</div>

	<div class="col-md-2" style="padding-top: 20px">
		<label></label>
		<%= submit_tag 'Grabas', class: 'btn btn-green' %>
	</div>

</div>

<% end %>
<table class="list">
	<tr class="head">
		<td width="80">Cuotas</td>
		<td width="80" align="right">Monto</td>
		<td width="100" align="center">Venc.</td>
	</tr>
	<% tot = 0 %>
	<% @presupuesto.presupuesto_cotas.select("presupuesto_cotas.cuotas, min(presupuesto_cotas.vencimento) as vencimento, sum(presupuesto_cotas.valor_gs) as valor_gs").group(:cuotas).order("presupuesto_cotas.cuotas").each do |pc| %>
		<tr class = "<%= cycle("cor1", "cor2") %>">
		<td><%= pc.cuotas %></td>
		<td align="right"><%= format_int(pc.valor_gs) %></td>
		<td align="center"><%= pc.vencimento.strftime("%d/%m/%Y") %></td>
		</tr>
		<% tot += pc.valor_gs.to_f %>
	<% end %>
	<tr>
		<td></td>
		<td><%= format_int(tot) %></td>
	</tr>
</table>

<style>
.list td{
	padding: 10px;
  border-bottom: 1px solid #efefef !important;
  cursor: pointer;	
}	
</style>